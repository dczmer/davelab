<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Basic ZSH Configuration</title>
    <link rel="stylesheet" href="http://localhost:4000//jekyll-test/css/reset.css" />
    <link rel="stylesheet" href="http://localhost:4000//jekyll-test/css/dracula-rouge.css" />
    <link rel="stylesheet" href="http://localhost:4000//jekyll-test/css/site.css" />
    <link rel="shortuct icon" type="image/ico" href="http://localhost:4000//jekyll-test/img/favicon.ico" />
  </head>
  <body>
    <header>
      <section>
        <a href="/jekyll-test/"> davelab</a>
      </section>
      <section title="I feel like there needs to be something on this side...">
        <a href="https://github.com/dczmer/davelab.git">
           GitHub
        </a>
      </section>
    </header>
    <nav>
      <section>
        
        
          
          
          
        
          
          
          
            <section class="subnav">
              <span class="selected-module">
                Zsh configuration
              </span>
              <ul class="">
                
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/zsh_configuration/index"
                    >
                      ZSH Configuration Intro
                    </a>
                  </li>
                
                  <li>
                    <a
                      class="selected-section"
                      href="http://localhost:4000/jekyll-test/zsh_configuration/01_zsh-config"
                    >
                      Basic ZSH Configuration
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/zsh_configuration/02_prompt"
                    >
                      Configuring Your Prompt
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/zsh_configuration/03_completion"
                    >
                      The Completion System
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/zsh_configuration/04_complete-setup"
                    >
                      Completed Configuration
                    </a>
                  </li>
                
              </ul>
            </section>
          
        
          
          
          
            <section class="subnav">
              <span class="">
                Using the shell
              </span>
              <ul class="subnav-inactive">
                
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/index"
                    >
                      Shell Intro
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/01_help-hisory"
                    >
                      Finding Help
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/02_expansion-signals"
                    >
                      Expansion and Signals
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/03_streams-and-pipes"
                    >
                      (WIP) Streams and Pipes
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/04_commands"
                    >
                      Useful Commands
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/using_the_shell/05_one-liners"
                    >
                      (WIP) Useful One-Liners
                    </a>
                  </li>
                
              </ul>
            </section>
          
        
          
          
          
            <section class="subnav">
              <span class="">
                Tmux
              </span>
              <ul class="subnav-inactive">
                
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/tmux/index"
                    >
                      Tmux Intro
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/tmux/01_basic-usage"
                    >
                      Tmux Basic Usage
                    </a>
                  </li>
                
                  <li>
                    <a
                      class=""
                      href="http://localhost:4000/jekyll-test/tmux/02_configuration"
                    >
                      Tmux Configuration
                    </a>
                  </li>
                
              </ul>
            </section>
          
        
      </section>
    </nav>
    <main>
      <h1 id="basic-zsh-configuration">Basic ZSH Configuration</h1>

<ul id="markdown-toc">
  <li><a href="#basic-zsh-configuration" id="markdown-toc-basic-zsh-configuration">Basic ZSH Configuration</a>    <ul>
      <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
      <li><a href="#exploring-the-example-configuration" id="markdown-toc-exploring-the-example-configuration">Exploring the Example Configuration</a></li>
      <li><a href="#command-history" id="markdown-toc-command-history">Command History</a>        <ul>
          <li><a href="#try-it-out" id="markdown-toc-try-it-out">Try it Out</a></li>
        </ul>
      </li>
      <li><a href="#custom-environment-varibles" id="markdown-toc-custom-environment-varibles">Custom Environment Varibles</a></li>
      <li><a href="#aliases" id="markdown-toc-aliases">Aliases</a></li>
      <li><a href="#custom-keybindings" id="markdown-toc-custom-keybindings">Custom Keybindings</a>        <ul>
          <li><a href="#the-line-editor" id="markdown-toc-the-line-editor">The Line Editor</a>            <ul>
              <li><a href="#try-it-out-1" id="markdown-toc-try-it-out-1">Try it Out</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#making-a-modular-configuration" id="markdown-toc-making-a-modular-configuration">Making a Modular Configuration</a></li>
      <li><a href="#managing-your-configuration-as-a-git-repository" id="markdown-toc-managing-your-configuration-as-a-git-repository">Managing Your Configuration as a Git Repository</a></li>
    </ul>
  </li>
</ul>

<h2 id="overview">Overview</h2>

<p>Your <code>zshrc</code> file contains configuration and customization that will be applied to every interactive <code>zsh</code> session. By default, this configuration file is <code>~/.zshrc</code> (“~” is an alias for your home directory).</p>

<p>In this section, we’ll cover some core, global configuration settings, as well as managing your command history.</p>

<p>An example <a href="./zshrc-example.zsh">zshrc-example.zsh</a> file has been provided with the configuration options discussed in this chapter. The example file is fully commented with descriptions of every line.</p>

<p>For the most part, you just need to read-along and try the suggested exercises along the way. The exercises mostly amount to running a command at the terminal and observing the change that the various configuration options make.</p>

<h2 id="exploring-the-example-configuration">Exploring the Example Configuration</h2>

<p>Open this document in a window, on one side of your screen, and open your terminal emulator on the other half.</p>

<p>Start a fresh <code>zsh</code> session:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zsh <span class="nt">-df</span>
</code></pre></div></div>

<p>This will enter a clean <code>zsh</code> shell with NO configuration (only the default settings).</p>

<p>When you want to apply the contents of the example file (or your own test files), you can <code>source</code> those files to import them into the current session:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ./zshrc-example.zsh
</code></pre></div></div>

<p>When you make changes the example file you will need to <code>source</code> it again.</p>

<p>If you want to go back to a clean shell and start over, type <code>exit</code> or press <code>ctrl+d</code> to go back to your regular shell, and you can start again.</p>

<h2 id="command-history">Command History</h2>

<p>The command history is a major key to unlocking command line productivity.</p>

<p>The most important things to configure are the location and size of your history file, and whether you want to share your history across terminal instances or only keep the history of the current session.</p>

<p>Since it’s likely you will find yourself using multiple terminals at once to get your job done, you probably want to share your history across all terminals and keep it around for a long time.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">HISTFILE</span><span class="o">=</span><span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.zsh_history"</span>
<span class="nv">HISTSIZE</span><span class="o">=</span><span class="s2">"50000"</span>
<span class="nv">SAVEHIST</span><span class="o">=</span><span class="s2">"50000"</span>
setopt SHARE_HISTORY
setopt APPEND_HISTORY
</code></pre></div></div>

<p>This sets a single history file location for all sessions to use, and will keep up to 50,000 entries in that file. When the history size is exceeded, the oldest commands in the file will be deleted.</p>

<p>You can save space by de-duplicating the entries in your history file. However, it is often very useful to cycle through entries in your history, in sequence, to replay a series of repeated commands. In that case, you would want to keep the duplicate commands so you can play them back in the correct order.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># This first one means do ignore _consecutive_ duplicate commands in the same session.</span>
<span class="c"># if you type the exact same command multiple times in a row, only store it once.</span>
setopt HIST_IGNORE_DUPS

<span class="c"># IGNORE_ALL_DUPS means globally de-dupe the history. We don't want this.</span>
unsetopt HIST_IGNORE_ALL_DUPS

<span class="c"># Allow treating duplicates like any other history entries.</span>
unsetopt HIST_SAVE_NO_DUPS
unsetopt HIST_FIND_NO_DUPS
unsetopt HIST_EXPIRE_DUPS_FIRST
</code></pre></div></div>

<p>The extended history option will record additional information in the history file: the time when the command was entered, and how long it ran.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setopt EXTENDED_HISTORY
</code></pre></div></div>

<h3 id="try-it-out">Try it Out</h3>

<p>Start a new <code>zsh</code> session and <code>source</code> the example file:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zsh <span class="nt">-df</span>
<span class="nb">source</span> ./zshrc-example.zsh
</code></pre></div></div>

<p>Now type a few commands:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls
ls</span> <span class="nt">-al</span>
find <span class="nb">.</span> <span class="nt">-name</span> <span class="s1">'*.md'</span>
<span class="nb">echo</span> <span class="s1">'hello world'</span>
</code></pre></div></div>

<p>Print the last few entries from the history:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> ~/.zsh_history
</code></pre></div></div>

<p>Use the <code>up</code> and <code>down</code> arrow keys to cycle through the entries at the terminal. You can hit enter/return to re-run the command or use the <code>left</code> and <code>right</code> arrow keys to move around and edit the command first.</p>

<p>Press <code>ctrl+r</code> and start typing ‘hello’ when prompted for a search.</p>

<p>Try navigating back to the <code>find</code> command, and changing <code>.md</code> to <code>.zsh</code> to search for <code>zsh</code> files instead of markdown.</p>

<h2 id="custom-environment-varibles">Custom Environment Varibles</h2>

<p>Environment variables can store values in your shell environment, like global options or settings. Some applications, including <code>zsh</code>, will look for specific environment variables in your session and use those variables as configuration.</p>

<p>You should always set the <code>EDITOR</code> variable to point to the CLI text editor you prefer to use. When other programs want you to edit a file, like <code>git</code>, they will open that file with your chosen editor.</p>

<p>You will also frequently need to manage your <code>PATH</code> environment variable. This is what <code>zsh</code> will use to find a command. If you type a command name, without providing the path to that command file, then <code>zsh</code> looks through all of the directories listed in <code>PATH</code> and checks each one for the command.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># use 'vim' as my editor</span>
<span class="nb">export </span><span class="nv">EDITOR</span><span class="o">=</span><span class="s1">'vim'</span>
<span class="c"># look for my custom scripts in a bin folder in my home directory ("~")</span>
<span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">"</span><span class="nv">$PATH</span><span class="s2">:~/bin"</span>
</code></pre></div></div>

<p>The <code>export</code> is required for the variable to persist in your shell environment. Otherwise, it would only be local to the current script file.</p>

<p>Try printing the contents of your current <code>PATH</code> variable:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="nv">$PATH</span>
</code></pre></div></div>

<p class="note"><code>zsh</code> allows you to manage variables like <code>PATH</code> as actual array objects. The included <a href="./zshrc-example.zsh">zshrc-example</a> file uses this to set the path:
<code>export path=($path ~/bin)</code></p>

<h2 id="aliases">Aliases</h2>

<p>Use aliases to simplify entering long or repetitive tasks.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias</span> <span class="nt">--</span> <span class="nv">ll</span><span class="o">=</span><span class="s1">'ls --color -al'</span>
</code></pre></div></div>

<p>This will make a new command, <code>ll</code>, which is just the same as typing <code>ls --color -al</code>. Anything you type after the command will be forwarded as arguments to the real command.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ll ~/bin
<span class="c"># is the same as</span>
<span class="nb">ls</span> <span class="nt">--color</span> <span class="nt">-al</span> ~/bin
</code></pre></div></div>

<p>Another common use for aliases is to make short abbreviations for common commands:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 'gc' is short for 'git commit'</span>
<span class="nb">alias</span> <span class="nt">--</span> <span class="nv">gc</span><span class="o">=</span><span class="s1">'git commit'</span>
<span class="c"># 'gca' will do `git commit -am`</span>
<span class="nb">alias</span> <span class="nt">--</span> <span class="nv">gca</span><span class="o">=</span><span class="s1">'gc -am'</span>
</code></pre></div></div>

<p>Now you can commit everything at once with a very short command.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gca <span class="s2">"commit message"</span>
</code></pre></div></div>

<h2 id="custom-keybindings">Custom Keybindings</h2>

<p>You can make your own custom keybindings to invoke special <code>zsh</code> functions. Here are a couple that I always use:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># let's you search history in reverse with ctrl+r. we'll cover this later.</span>
bindkey <span class="s2">"^R"</span> history-incremental-search-backward

<span class="c"># Bind home + end to navigate to front and end of line.</span>
<span class="c"># Start typing a long command and then press `home`.</span>
bindkey <span class="s2">"</span><span class="k">${</span><span class="nv">terminfo</span><span class="p">[khome]</span><span class="k">}</span><span class="s2">"</span> beginning-of-line
bindkey <span class="s2">"</span><span class="k">${</span><span class="nv">terminfo</span><span class="p">[kend]</span><span class="k">}</span><span class="s2">"</span> end-of-line
</code></pre></div></div>

<p>If you use <code>vim</code> or <code>emacs</code>, then <code>zsh</code> can use the normal keybindings from those editors to edit your command text at the prompt. If you don’t use either of those, you can ignore this option:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># use vim keybindings</span>
bindkey <span class="nt">-v</span>
</code></pre></div></div>

<h3 id="the-line-editor">The Line Editor</h3>

<p>The <code>zsh</code> line editor will let you open your <code>EDITOR</code> with the contents of the command you are currently entering at the prompt. There, you can edit the command like a normal text file. When you save and exit, the full command will be pasted at the command line, ready to enter.</p>

<p>First, you need to enable it, and bind a key to start it:</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>autoload edit-command-line
zle <span class="nt">-N</span> edit-command-line

<span class="c"># bind ctrl+e to start the line editor.</span>
bindkey <span class="s2">"^e"</span> edit-command-line
</code></pre></div></div>

<h4 id="try-it-out-1">Try it Out</h4>

<p>First make sure the <code>zshrc-example.zsh</code> file has been sourced into the current session.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zsh <span class="nt">-df</span>
<span class="nb">source</span> ./zshrc-example.zsh
</code></pre></div></div>

<p>Start typing a command, <code>ls /bin</code> but do not press enter/return. Now press <code>Ctrl+e</code> to launch the editor.</p>

<p>In the text editor, change the text from <code>ls /bin</code>, to <code>find . -name '*sh'</code>. Save the file and exit the editor. Press enter to run the command.</p>

<h2 id="making-a-modular-configuration">Making a Modular Configuration</h2>

<p>As you add more and more useful aliases, environment variables, and custom configuration options, you may find that you need to modularize your configuration.</p>

<p>For example, if you have a lot of common aliases that you want to keep in a separate file, you can import that file in your <code>zshrc</code> file.</p>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source</span> ./aliases.zsh
<span class="c"># or</span>
<span class="nb">.</span> aliases.zsh
</code></pre></div></div>

<h2 id="managing-your-configuration-as-a-git-repository">Managing Your Configuration as a Git Repository</h2>

<p>You should manage your <code>zshrc</code> configuration as a <code>git</code> repository. This will allow you to back it up and easily copy it to other machines. It will also let you create checkpoints by making local commits whenever you make a change. If you really mess up, you can just go back to the previous commit.</p>

<ol>
  <li>Create a new repository somewhere. Example: <code>git init ~/src/my-zshrc</code></li>
  <li>Copy your custom <code>zshrc</code> file, or the provided <a href="./zshrc-example.zsh">zshrc-example.zsh</a>, to that repository and call it <code>zshrc.zsh</code>.</li>
  <li>If you have additional source files/modules, put them in the same directory.</li>
  <li>Add all the files to the repository and make an initial commit.</li>
  <li>Now you can make a symbolic link to point <code>~/.zshrc</code> to your <code>zshrc.zsh</code> file.</li>
</ol>

<div class="language-zsh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> ~
<span class="nb">ln</span> <span class="nt">-s</span> ~/src/my-zshrc/zshrc.zsh .zshrc
</code></pre></div></div>

<hr />

<p><a href="./02_prompt">NEXT »</a></p>

    </main>
    <footer>
      <a href="/jekyll-test/"> davelab</a>
      <section>
        <a href="/jekyll-test/test">(Secret test page)</a>
        <a href="/jekyll-test/about">ABOUT</a>
        <a href="https://github.com/dczmer/davelab.git" target="_blank"> GITHUB</a>
      </section>
    </footer>
  </body>
</html>
